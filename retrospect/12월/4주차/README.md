# (인사이트) `Windows OS`와 `Mac OS`

자사 소프트웨어인 `INVAIZ Studio`는 `Windows OS`와 `Mac OS`를 동시에 지원해야 한다.  
이로 인해 두 가지 모두를 개발해야하는데, 모두 개발하기에는 리소스 낭비가 너무 심하다.  
그리하여 `Node.js`의 크로스 플랫폼 데스크탑 앱 개발 프레임워크인 `Electron.js`를 활용하여 개발하고 있다.

`Electron.js`라는 크로스 플랫폼을 개발하면서, `Electron.js`나 `Node.js`의 오픈 라이브러리에서 지원되지 않는 기능은 직접 네이티브 개발을 해야하는 경우를 피할 수 없게 됐다.

> 그래서 궁극적인 의미의 크로스 플랫폼이 가능한지에 대한 고민을 하게 됐다.

## 운영체제(`Operating System`, `OS`)

크로스 플랫폼을 이야기하기에 앞서서, 먼저 운영체제에 대해 바로 알고 가야할 필요가 있다.

> 운영체제란, 시스템 하드웨어를 관리, 응용 소프트웨어를 효율적으로 실행/사용할 수 있도록 만든 시스템 소프트웨어이다.

즉, 사용자와 하드웨어 간의 인터페이스(대화 방법)으로 동작하며, 컴퓨터 자원들을 효율적으로 사용할 수 있도록 도와주는 역할을 한다.

대표적인 예시는 Microsoft 사의 `Windows`, Apple 사의 `Mac`, `iOS`, Google 사의 `Android` 등이 있다.
데스크탑의 운영체제로는 `Windows`, `Mac`, `Linux` 이렇게 세 운영체제가 가장 유명하다.

우선 사용자와 하드웨어 간의 인터페이스(대화 방법)으로 동작한다는 말은, 우리가 프린터를 사용할 때 스크린이 있는 프린터와 스크린이 없는 프린터를 예시로 들면 이해하기 쉬울 것이다.  
우리가 어떠한 문서를 인쇄하고자 할 때, 예전 프린터의 경우에는 터치 스크린이 없기 때문에 컴퓨터에서 연결된 프린터로의 인쇄 명령을 보내면, 프린터가 인쇄하는 방식으로 동작했었다.
하지만 요즘은 프린터 자체에 인쇄 버튼이 있어 인쇄 버튼을 누를 수 있게 됐는데, 이 인쇄 버튼이 사용자와 하드웨어 간의 대화 방법이라고 보면 된다.
실제로는 010110등의 기계어로 프린터에게 명령을 보냈겠지만, 사용자는 인쇄 버튼이라는 대화 방법을 통해 프린터를 조작할 수 있는 것이다. 이런 역할이 바로 운영체제이다.

`Windows`에서 마우스를 이용해 마우스를 클릭하는 명령 코드를 보내고, 텍스트 파일을 열었을 때, 운영체제는 실제 저장장치에 명령을 보내 데이터를 읽어오고, 그를 모니터에 출력해주는 역할을 수행해주는 것이다.

여기서 `Windows`는 Microsoft에서 개발했었던 `MS-DOS`를 기반으로 개발된 운영체제이고, `Mac`과 `Linux`는 `UNIX`를 기반으로 개발된 운영체제이다.
즉, 운영체제의 뿌리가 다른 것이다. 그렇기에 겉보기에는 `GUI`를 사용하고, 모니터를 여러 개 쓸 수 있고, 마우스를 더블 클릭하여 폴더를 여는 등의 동작을 비슷하게 수행하지만, 실제로 내부 운영체제는 전혀 다른 대화 방법으로 통신을 하고 있는 것이다.

쉽게 말해, 위의 마우스를 이용해 마우스를 클릭하는 예시에서, 클릭하는 명령 코드가 다른 것이다.
`Windows`에서 동작하는 프로그램은 `Mac`에서 동작하지 않으며, `Mac`에서 동작하는 프로그램이 간혹 `Linux`에서 소스 조금만 변경해도 실행되고, `iOS` 등에서 쉽게 실행 가능한 이유가 바로 이것이다.

그렇게 다른 명령의 운영체제를 통합하려는 시도가 바로 크로스 플랫폼이다.

## 크로스 플랫폼(`cross platform`, `multi platform`)

> 크로스 플랫폼이란, 컴퓨터 프로그램, 운영 체제, 컴퓨터 언어, 프로그래밍 언어, 컴퓨터 소프트웨어 등이 여러 종류의 컴퓨터 플랫폼에서 동작할 수 있다는 것을 뜻하는 용어이다.

우리가 자주 사용하는 인터넷. 즉, 웹 브라우저도 `Google Chrome`, `Internet Explorer`, `Opera`, `Safari` 등의 종류가 있어 같은 `HTML`, `CSS`, `JavaScript`가 다르게 보이는 문제가 있고, 이를 통합하기 위해 "크로스 브라우징"이라는 용어의 시도를 하곤 한다.

쉽게 말해, `Windows`에서는 0101이라는 명령이 밝기를 줄이고, `Mac`에서는 0011이라는 명령이 밝기를 줄인다고 한다면, "모니터의 밝기를 줄여라." 라는 명령을 시도했을 때, 현재 운영체제가 어디인지 파악하고 그에 맞는 명령을 실행해주는, 중간자 역할을 해주는 통역사의 역할이라고 생각할 수 있겠다.

흔히들 `Java`라는 프로그래밍 언어를 많이 들어봤을텐데, 이게 유명한 이유는 `JRE`라는 크로스 플랫폼 환경에서 동작하는 프로그래밍 언어이기 때문에 같은 코드를 사용해도 `Windows`, `Mac` 운영체제 구분없이 사용 가능한 코드. 즉, 운영체제에 종속적이지 않은 개발로 생산성이 높아지기 때문이다.

## 네이티브 개발

`Windows`에서 동작하는 프로그램을 만드는 것. 즉, 특정 운영체제에서 어떠한 기능을 동작하게 만드는 것을 네이티브 개발이라고 한다.

이렇게 개발을 했을 때 `Java`와 같은 언어가 아니라면 운영체제에 종속적인 개발 코드가 작성이 되는데, 개발팀이 흔히들 `iOS`팀과 `Android`, `Windows`팀과 `Mac` 팀이 분할되어 있는 이유가 이 때문이다, 현재는 크로스 플랫폼을 통해 개발을 하더라도 구현할 수 있는 기능에 한계가 있기 때문에 네이티브 개발을 꼭 해야만 하는 것이다.

## 크로스 플랫폼이 왜 어려운가?

게임에서 가장 쉽게 이유를 찾을 수 있다. 운영체제도 다르며 운영체제마다 지원되는 기능의 범위가 다르기 때문이다. 특히나 게임이 `Mac`을 지원하지 않는 경우가 대다수인데, 이는 그래픽을 사용하는 하드웨어의 지원에 있어서 `Mac`이 굉장히 불친절하기 때문이다. 요즘은 고사양 게임이 대다수인데 이런 고사양 게임을 이용하기 위해서 고성능의 그래픽카드를 효율적으로 사용해야하는 것은 프로그램의 덕목이다. 하지만 이를 `Mac`에서 다루기 어렵기 때문에 크로스 플랫폼이 어려워지는 이유가 있다고 볼 수 있다.

이전까지 우리 소프트웨어는 오버레이, 창 띄우기, 파일 다루기, 단축키 실행, 프로그램 리스트 가져오기 등의 기능을 모두 크로스 플랫폼을 통해 개발했다. 오버레이, 창 띄우기, 파일 다루기 등의 기능은 `Electron.js`에서, 단축키 실행은 `robotjs`, 프로그램 리스트 가져오기는 `node-window-manager`라는 라이브러리, 프레임워크가 크로스 플랫폼을 지원해주었기 때문이다.

하지만 최근 `Adobe Photoshop`의 `CameraRaw`를 개발하는 것은, 아직까지 크로스 플랫폼이 지원되는지 확인되지 않았다. `Windows`에서는 네이티브 개발을 통해 `CameraRaw` 창에 직접 접근하는 명령을 찾아내어 제어하는 코드를 작성 후 [`DLL` 파일](https://ko.eyewated.com/dll-%ED%8C%8C%EC%9D%BC%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9E%85%EB%8B%88%EA%B9%8C/)로 실행할 수 있지만, `Mac`에서는 이 직접 접근하는 명령이 다르기 때문에 같은 `DLL` 파일을 실행하더라도 동작하지 않는다.

즉, 직접 크로스 플랫폼이 가능한 것처럼 네이티브 개발을 해야하는 것이다.

`Mac`에서는 가능한 스크롤이0 `Windows`에서는 작동하지 않는 것은 `robotjs`라는 라이브러리의 `Windows` 크로스 플랫폼 코드에서 오류가 발생했기 때문이고, 프로그램 리스트를 가져올 때 `Windows`에서 이미지가 불러와지지 않는 현상은 `node-window-manager`에서 `Windows`의 이미지를 제대로 불러들이지 않기 때문이다. 또한 타이핑 한글 입력 시 `Windows`에서 `HUX` 같은 메세지가 뜬다거나, 키패드의 기능에서 숫자 외의 `+`, `-` 등의 입력은 불가능한 이유 또한 `robotjs`라는 라이브러리에서 지원되지 않기 때문이다. 이러한 문제를 해결하기 위해서는 해당 라이브러리의 기능을 그대로 동작할 수 있는 새로운 크로스 플랫폼 라이브러리를 개발하는 방법 밖엔 없다.

물론 이렇게 모든 기능 하나하나를 크로스 플랫폼으로 구현하다보면 언젠간 모든 기능이 크로스 플랫폼이 되지 않을까 생각을 해보았지만, 그러면 또 다시 새로운 기능이 나올 것 같다.

> 크로스 플랫폼에 의존하는 개발을 하게 되면 네이티브 개발 능력 향상에 도움이 되지 않으므로, 운영체제 간의 차이점을 파악하고, 그에 맞춰 네이티브 개발을 할 수 있는 능력은 개발자의 필수 덕목임을 알 수 있다.

> 물론 그렇게 되기 위해선 계속해서 성장을 해야할 필요가 있다.
